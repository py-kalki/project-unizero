---
phase: 03-ai-discovery-core
plan: '04'
type: execute
wave: 3
depends_on:
  - 03-03
files_modified:
  - src/app/(main)/tools/page.tsx
  - src/app/(main)/tools/[slug]/page.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - 'Tools page displays search bar, filters, and tool grid'
    - 'Tools page reads searchParams from URL for filters'
    - 'Tools page passes filter params to tool service'
    - 'Tool detail page shows full tool information'
    - 'Tool detail page links to tool website'
  artifacts:
    - path: 'src/app/(main)/tools/page.tsx'
      provides: 'Main tools catalog page'
      contains: 'searchParams, ToolSearch, ToolFilters, ToolGrid'
    - path: 'src/app/(main)/tools/[slug]/page.tsx'
      provides: 'Tool detail page'
      contains: 'tool info, pricing, website link, back navigation'
  key_links:
    - from: 'src/app/(main)/tools/page.tsx'
      to: 'src/lib/services/tool.service.ts'
      via: 'await getTools()'
      pattern: 'getTools.*searchParams'
    - from: 'src/app/(main)/tools/[slug]/page.tsx'
      to: 'src/lib/services/tool.service.ts'
      via: 'await getToolBySlug()'
      pattern: 'getToolBySlug.*params'
---

<objective>
Create the tools catalog page and tool detail page. Uses Next.js 15 async searchParams pattern for URL-driven search and filtering.
</objective>

<execution_context>
@C:/Users/ASUS/.config/opencode/get-shit-done/workflows/execute-plan.md
@C:/Users/ASUS/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/03-ai-discovery-core/03-RESEARCH.md
@src/components/tools/tool-card.tsx
@src/components/tools/tool-search.tsx
@src/components/tools/tool-filters.tsx
@src/components/tools/tool-grid.tsx
</context>

<tasks>

<task type="auto">
  <name>Create tools catalog page</name>
  <files>src/app/(main)/tools/page.tsx</files>
  <action>
    Create src/app/(main)/tools/page.tsx:
    1. Use async function (server component) - Next.js 15 requires this
    2. Define SearchParams type as Promise<{q?: string, category?: string, pricing?: string, page?: string}>
    3. Destructure and await searchParams
    4. Extract: query (q), category, pricing, page (parseInt)
    5. Set perPage = 12
    6. Call await getTools({query, category, pricing, page, perPage})
    7. Render:
       - Page title "AI Tools" with subtitle
       - ToolSearch component with initialValue={query}
       - ToolFilters component
       - ToolGrid with tools={tools}
       - Pagination controls (if total > perPage)
    8. Add loading.tsx for suspense state
    
    IMPORTANT: Next.js 15 searchParams is a Promise - must await!
    
    Reference: 03-RESEARCH.md lines 111-148 for page pattern
  </action>
  <verify>Page compiles, searchParams properly awaited</verify>
  <done>Tools page renders with search, filters, and grid</done>
</task>

<task type="auto">
  <name>Create tool detail page</name>
  <files>src/app/(main)/tools/[slug]/page.tsx</files>
  <action>
    Create src/app/(main)/tools/[slug]/page.tsx:
    1. Use async function (server component)
    2. Accept params as Promise<{slug: string}> (Next.js 15)
    3. Await params to get slug
    4. Call await getToolBySlug(slug)
    5. If tool not found, return notFound() from next/navigation
    6. Render:
       - Back link to /tools
       - Tool name as h1
       - Category badge
       - Full description
       - Pricing information (type, monthly/yearly, note)
       - Features list (if any)
       - Website link (external, opens in new tab)
       - "Last verified" timestamp if available
    7. Style with Card components for sections
    
    Reference: 03-RESEARCH.md lines 437-496 for card pattern
  </action>
  <verify>Page compiles, shows tool details correctly</verify>
  <done>Tool detail page shows full tool information with external link</done>
</task>

<task type="auto">
<name>Create loading state for tools page</name>
<files>src/app/(main)/tools/loading.tsx</files>
<action>
  Create src/app/(main)/tools/loading.tsx:
  1. Show skeleton loaders matching ToolCard structure
  2. Show 6-12 skeleton cards in grid
  3. Include loading text "Loading tools..."
</action>
<verify>Loading state displays while data fetches</verify>
<done>Tools page has loading state with skeleton cards</done>
</task>

</tasks>

<verification>
1. Visit /tools and verify search bar, filters, grid visible
2. Search for "chat" - verify URL updates to ?q=chat
3. Click "LLMs" category - verify URL updates to ?category=llms
4. Click "Free" pricing - verify URL includes pricing=free
5. Visit /tools/chatgpt - verify detail page shows
6. Verify empty state when no tools match filters
</verification>

<success_criteria>

- Tools page loads with all tools by default
- Search updates URL and filters results
- Category filter updates URL and filters results
- Pricing filter updates URL and filters results
- Tool detail page shows complete tool information
- External website link opens in new tab
- Loading states work during data fetch
  </success_criteria>

<output>
After completion, create `.planning/phases/03-ai-discovery-core/{phase}-04-SUMMARY.md`
</output>
